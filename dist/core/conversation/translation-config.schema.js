"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CreateTranslationServiceRequestSchema = exports.TranslationConversationConfigSchema = exports.TranslationServiceRequestSchema = void 0;
const zod_1 = require("zod");
const base_schema_1 = require("../base.schema");
/**
 * @fileoverview Translation configuration schema definitions for translation services.
 *
 * Translation configurations manage real-time language translation sessions between participants speaking
 * different languages. Enables cross-language communication through speech-to-text transcription, translation,
 * and text-to-speech synthesis. Used for multilingual customer support, international business meetings,
 * and cross-border communications.
 *
 * @module conversation/translation-config
 */
/**
 * Translation service request schema.
 *
 * Request payload for initiating a real-time translation session between two participants speaking
 * different languages. Specifies participant identifiers, their native languages, and optional
 * configuration for the translation service provisioning.
 *
 * @remarks
 * **Architecture Context:**
 * - **Extends**: BaseModelSchema with translation-specific fields
 * - **Creates**: TranslationServiceLog when session is initiated
 * - **Participants**: 1:N - One request can lead to multiple participant records
 * - **Session Tracking**: session_id enables grouping related translation requests
 *
 * **Translation Flow:**
 * 1. Client submits TranslationServiceRequest with participant details
 * 2. System creates TranslationServiceLog and participant records
 * 3. Real-time translation session begins with bidirectional audio streaming
 * 4. Speech transcribed → translated → synthesized for each participant
 *
 * **Use Cases:**
 * - Customer calling support in different language than agent
 * - International business calls requiring real-time translation
 * - Multilingual conference calls with language bridges
 */
exports.TranslationServiceRequestSchema = base_schema_1.BaseModelSchema.safeExtend({
    initiator_id: zod_1.z.string().describe("Unique identifier for the initiator participant who is requesting the translation service (typically the customer or caller starting the session)"),
    initiator_language_code: base_schema_1.LanguageCodeSchema.describe("ISO 639-1 language code of the initiator's native spoken language (e.g., 'en-US' for American English, 'es-MX' for Mexican Spanish, 'fr-FR' for French)"),
    participant_language_code: base_schema_1.LanguageCodeSchema.describe("ISO 639-1 language code of the other participant's native spoken language (e.g., 'ja-JP' for Japanese, 'de-DE' for German, 'zh-CN' for Mandarin Chinese)"),
    session_id: zod_1.z.string().optional().nullable().describe("Optional session ID for tracking and grouping related translation requests in multi-participant scenarios or session resumption"),
    translation_config_id: zod_1.z.string().optional().nullable().describe("Optional translation configuration ID to use specific provisioning chain for this translation service (references ProvisioningConfigChain with isTranslation=true)"),
});
/**
 * Translation conversation configuration schema.
 *
 * Configuration details for an active translation session including WebRTC connection identifiers,
 * channel information, and participant access credentials. Returned when a translation session is
 * successfully initiated, providing clients with necessary connection parameters.
 *
 * @remarks
 * **Architecture Context:**
 * - **Generated By**: Translation service initialization endpoint
 * - **Used For**: Establishing WebRTC connections for real-time audio streaming
 * - **Participants**: Contains access credentials for both initiator and participant
 * - **Security**: Tokens are short-lived and session-specific for secure communication
 *
 * **WebRTC Connection:**
 * - sdrtn_id: Session Description for Real-Time Networking identifier
 * - Enables peer-to-peer audio streaming with low latency
 * - Supports bidirectional translation in real-time
 *
 * **Participant Authentication:**
 * - Each participant receives unique access_id and token
 * - Tokens authenticate WebRTC connections
 * - Session-scoped credentials prevent unauthorized access
 */
exports.TranslationConversationConfigSchema = zod_1.z.object({
    sdrtn_id: zod_1.z.string().optional().nullable().describe("SDRTN (Session Description and Real-Time Networking) identifier for WebRTC connections enabling peer-to-peer audio streaming between participants"),
    channel_identifier: zod_1.z.string().describe("Unique identifier for the communication channel (phone number in E.164 format, WebRTC channel ID, or conference room identifier) used for routing and session tracking"),
    initiator_access_id: zod_1.z.string().describe("Unique access identifier for the initiator participant used to authenticate their WebRTC connection and track their audio stream"),
    initiator_token: zod_1.z.string().describe("Short-lived authentication token for the initiator's communication channel, grants access to the translation session (expires after session or timeout)"),
    participant_access_id: zod_1.z.string().describe("Unique access identifier for the other participant used to authenticate their WebRTC connection and track their audio stream"),
    participant_token: zod_1.z.string().describe("Short-lived authentication token for the participant's communication channel, grants access to the translation session (expires after session or timeout)"),
});
/**
 * Schema for creating a new translation service request.
 * Omits auto-generated fields.
 */
exports.CreateTranslationServiceRequestSchema = exports.TranslationServiceRequestSchema.omit({
    id: true,
    createdAt: true,
    updatedAt: true,
});
